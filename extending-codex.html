<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  Extending Codex &ndash; Example of Codex documentation for a Common Lisp library
</title>
    <link rel="stylesheet" href="static/style.css"/>
    
  <link rel="stylesheet" href="static/highlight.css"/>
  <script src="static/highlight.js"></script>
  <style>
   /* Highlight the current top-level TOC item, and hide the TOC of all other items */

   .toc a[data-node="extending-codex"] {
       color: #AD3108;
   }

   .toc ol {
       display: none;
   }

   .toc > ol {
       display: block;
   }

   .toc li a[data-node="extending-codex"] + ol {
       display: block;
   }

   .toc li a[data-node="extending-codex"] + ol li {
       font-size: 16px;
       margin: 0 10px;
   }

   .toc li a[active] + ol li:first-child {
       margin-top: 5px;
   }
  </style>

  </head>
  <body>
    
  <h1 class="doc-title">Example of Codex documentation for a Common Lisp library Â» Extending Codex</h1>
  <article id="article" data-section="extending-codex">
    <aside>
      <ol class="toc"><li><a href="index.html" data-node="index">Introduction</a></li><li><a href="pros-&-cons-of-codex.html" data-node="pros-&-cons-of-codex">Pros &amp; Cons of Codex</a><ol><li><a href="pros-&-cons-of-codex.html#pros" data-node="pros">Pros</a></li><li><a href="pros-&-cons-of-codex.html#cons" data-node="cons">Cons</a></li></ol></li><li><a href="handwritten-documentation.html" data-node="handwritten-documentation">Handwritten documentation</a></li><li><a href="extending-codex.html" data-node="extending-codex">Extending Codex</a></li><li><a href="autogenerated-api.html" data-node="autogenerated-api">Autogenerated API</a><ol><li><a href="example-app-package.html" data-node="example-app-package">example/app package</a></li><li><a href="0-example-app-package.html" data-node="0-example-app-package">example/app package</a></li></ol></li><li><a href="conclusion.html" data-node="conclusion">Conclusion</a></li></ol>
    </aside>
    <main class="codex-section">
      <p><code>Codex</code>, <code>CommonDoc</code> and <code>Scriba</code> were built with extensibility in mind. Here is an example
I've published in the #poftheday <a href="https://40ants.com/lisp-project-of-the-day/2020/09/0178-scriba.html">post</a>.</p><p>It adds a new type of node into the markup language:</p><pre><code class="lisp">POFTHEDAY&gt; (common-doc:define-node twitter (common-doc:markup)
                                   ()
                                   (:tag-name &quot;twitter&quot;))

POFTHEDAY&gt; (common-html.emitter::define-emitter (node twitter)
             (let* ((username (common-doc:text (first (common-doc:children node))))
                    (url (format nil &quot;https://twitter/~A&quot; username))
                    (name (format nil &quot;@~A&quot; username)))
               (common-html.emitter::with-tag (&quot;a&quot; node :attributes `((&quot;href&quot; . ,url)))
                                              (write-string name
                                                            common-html.emitter::*output-stream*))))

POFTHEDAY&gt; (common-doc.format:parse-document *format* &quot;Hello @ twitter(bob)!&quot;)
#&lt;COMMON-DOC:DOCUMENT &quot;&quot;&gt;

POFTHEDAY&gt; (pandocl:emit  * &quot;hello.html&quot;)
#&lt;COMMON-DOC:DOCUMENT &quot;&quot;&gt;

POFTHEDAY&gt; (alexandria:read-file-into-string &quot;hello.html&quot;)
&quot;&lt;!DOCTYPE html&gt;
 &lt;html&gt;
    &lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
       Hello &lt;a href=\&quot;https://twitter/bob\&quot;&gt;@bob&lt;/a&gt;!
    &lt;/body&gt;
&lt;/html&gt;&quot;

</code></pre><dl><dt>NOTE<sup>1</sup></dt><dd>
  I've intentionally added a space between 
  character and <code>twitter</code> node name in the snippet
  abover, because <a href="https://github.com/CommonDoc/scriba/issues/6">there is a bug</a> in the Scriba
  parser which does not allow to use unknown Scriba tags in the code snippets.
</dd><dt>NOTE<sup>2</sup></dt><dd>
  I've intended to add a sad &quot;smile&quot; at the end of the previos note, but seems
  <a href="https://github.com/CommonDoc/scriba/issues/7">Scriba doesnt' understand jokes</a>.
</dd></dl>
    </main>
  </article>
  <footer>
    <div class="info">
      Created with <a href="https://github.com/CommonDoc/codex">Codex</a>.
    </div>
  </footer>
  <script>
   HighlightLisp.highlight_auto();
  </script>

  </body>
</html>
